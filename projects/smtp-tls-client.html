<!DOCTYPE html><html><head><script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat|Roboto&amp;display=swap"><link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="shortcut icon" type="image/x-icon" href="../images/personal_logo_favicon.ico"><link rel="stylesheet" href="../css/base.css"><script src="../js/portfolio.js"></script><title>SMTP TLS CLIENT</title></head><body><nav><div class="float-content"><a class="icon-button" href="https://jkeay.github.io/Portfolio/index.html"><svg class="icon-logo" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 720 720" style="enable-background:new 0 0 720 720;" xml:space="preserve"><g><path d="M672.7,358.7c-8.9-0.1-20.2-0.1-25.6-0.1c-15,0-24-14.2-24-38.1V83.3c0-39.9-35.9-42-43.1-42c0,0,0,0,0,0V16.2 c28.2,0.3,48.2,11.8,59.5,34c8.6,16.9,8.7,34.1,8.7,34.3v236C648.3,345.1,662,354.9,672.7,358.7z"></path><path d="M581.2,17.4c14.6,0.3,27,3.8,37.1,10.4c8.4,5.5,15.2,13.2,20.2,22.9c8.5,16.7,8.6,33.6,8.7,33.8v236 c0,21.4,10,31.9,19.8,37c-7.5-0.1-15.5-0.1-19.8-0.1c-14.3,0-22.8-13.8-22.8-36.9V83.3c0-21.6-10.6-32.1-19.6-37 c-9.1-5.1-18.8-6-23.6-6.1V17.4 M578.8,15v27.6c0,0,0.4,0,1.2,0c7,0,41.9,1.9,41.9,40.8c0,43.1,0,194.1,0,237.2 c0,26.1,10.5,39.3,25.2,39.3c9.6,0,36.9,0.2,38.3,0.2c-1.5,0-35.9-0.9-35.9-39.5c0-43.1,0-236,0-236S649.5,15,578.8,15L578.8,15z M685.4,360C685.4,360,685.4,360,685.4,360C685.4,360,685.4,360,685.4,360L685.4,360z"></path></g><g><path d="M580,678.3C580,678.3,580,678.3,580,678.3c7.2,0,43.1-2,43.1-42V399.1c0-24.6,8.5-38.2,24-38.2c4.9,0,15.3,0.1,24,0.1 c-10.5,3.7-22.8,13.4-22.8,38v236c0,0.2-0.1,17.5-8.7,34.5c-11.4,22.4-31.4,33.9-59.5,34.2V678.3z"></path><path d="M647.1,362.2c4,0,11.4,0,18.7,0.1c-9.4,5-18.7,15.4-18.7,36.9v236c0,0.2-0.1,17.2-8.7,34c-4.9,9.7-11.7,17.5-20.2,23 c-10,6.6-22.5,10.1-37.1,10.4v-23.1c9.5-0.3,43.1-3.9,43.1-43.1V399.1C624.3,375.3,632.4,362.2,647.1,362.2 M647.1,359.8 c-14.6,0-25.2,11.9-25.2,39.4c0,43.1,0,194.1,0,237.2c0,38.8-34.9,40.8-41.9,40.8c-0.8,0-1.2,0-1.2,0V705 c70.7,0,70.7-69.9,70.7-69.9s0-192.9,0-236c0-35.7,26.6-39,34-39.2C676.9,359.9,655,359.8,647.1,359.8L647.1,359.8z M684.4,360 c-0.2,0-0.5,0-0.8,0c1.2,0,1.9,0,1.9,0S685,360,684.4,360L684.4,360z"></path></g><path class="path1" d="M183.5,171.9h153.3c0,0,0,265.9,0,347.4s-153.3,83.9-153.3,0c0-35.9,0-35.9,0-35.9H217v35.9 c0,45.5,86.2,43.1,86.2,0s0-313.9,0-313.9H183.5V171.9z"></path><path class="path1" d="M370.4,313.3c88.6,0,105.4-45.5,105.4-141.4h35.9c0,119.8-19.2,174.9-141.4,174.9V313.3z"></path><path class="path1" d="M370.4,440.3c88.6,0,105.4,45.5,105.4,141.4h35.9c0-119.8-21.6-174.9-141.4-174.9V440.3z"></path><g><path d="M47.7,358.7c10.7-3.8,24.4-13.6,24.4-38.2v-236c0-0.2,0.1-17.4,8.7-34.3c11.4-22.3,31.4-33.7,59.5-34v25.1c0,0,0,0,0,0 c-7.2,0-43.1,2-43.1,42v237.2c0,23.9-9,38.1-24,38.1C67.8,358.6,56.6,358.6,47.7,358.7z"></path><path d="M139.2,17.4v22.7c-9.5,0.3-43.1,3.9-43.1,43.1v237.2c0,23.1-8.5,36.9-22.8,36.9c-4.3,0-12.2,0-19.8,0.1 c9.8-5.1,19.8-15.6,19.8-37v-236c0-0.2,0.1-17,8.6-33.7c4.9-9.7,11.7-17.4,20.2-23C112.1,21.3,124.6,17.8,139.2,17.4 M141.6,15 c-70.7,0-70.7,69.5-70.7,69.5s0,192.9,0,236c0,38.7-34.4,39.5-35.9,39.5c1.3,0,28.7-0.2,38.3-0.2c14.7,0,25.2-13.2,25.2-39.3 c0-43.1,0-194.1,0-237.2c0-38.8,34.9-40.8,41.9-40.8c0.8,0,1.2,0,1.2,0V15L141.6,15z M35,360C35,360,35,360,35,360 C35,360,35,360,35,360L35,360z"></path></g><g><path d="M140.4,703.8c-28.2-0.3-48.2-11.8-59.5-34.2c-8.6-17-8.7-34.3-8.7-34.5v-236c0-24.7-12.2-34.3-22.8-38 c8.7-0.1,19-0.1,24-0.1c15.4,0,24,13.6,24,38.2v237.2c0,16.9,6.4,29,19,36c9.7,5.4,20.1,6,24.2,6c0,0,0,0,0,0V703.8z"></path><path d="M73.3,362.2c14.7,0,22.8,13.1,22.8,37v237.2c0,39.2,33.6,42.9,43.1,43.1v23.1c-14.6-0.3-27-3.9-37.1-10.4 c-8.4-5.5-15.2-13.3-20.2-23c-8.5-16.8-8.7-33.8-8.7-34v-236c0-21.5-9.4-31.9-18.7-36.9C61.9,362.2,69.3,362.2,73.3,362.2 M73.3,359.8c-7.9,0-29.8,0.2-36.4,0.2c7.4,0.2,34,3.4,34,39.2c0,43.1,0,236,0,236s0,69.9,70.7,69.9v-27.9c0,0-0.4,0-1.2,0 c-7,0-41.9-1.9-41.9-40.8c0-43.1,0-194.1,0-237.2C98.4,371.7,87.9,359.8,73.3,359.8L73.3,359.8z M36,360c-0.7,0-1.1,0-1.1,0 s0.7,0,1.9,0C36.6,360,36.3,360,36,360L36,360z"></path></g></svg></a><ul class="navList"><li><span>PROJECTS</span><i class="drop-down-caret fa fa-caret-down"></i><ul class="drop-down"><li><a href="https://jkeay.github.io/Portfolio/projects/jpg-encoder.html">JPG ENCODER</a></li><li><a href="https://jkeay.github.io/Portfolio/projects/chat-application.html">CHAT APPLICATION</a></li><li><a href="https://jkeay.github.io/Portfolio/projects/smtp-tls-client.html">SMTP TLS CLIENT </a></li><li><a href="https://jkeay.github.io/Portfolio/projects/dynamic-reliability-protocol.html">DYNAMIC RELIABILITY</a></li></ul></li><li><a href="https://jkeay.github.io/Portfolio/contact.html">CONTACT</a></li></ul><button class="mobile-toggle"><span class="burger-top"></span><span class="burger-middle"></span><span class="burger-bottom"></span></button></div></nav><div class="bodyContent"><div class="bannerInfo"><div class="float-content"><h1 class="project-heading">SMTP TLS CLIENT</h1><ul class="project-tags"><li>PYTHON</li><li>SMTP</li></ul><a class="source-code" href="https://github.com/jkeay/SMTP-TLS-Mail-Client"><img src="../images/github.png"><span>SOURCE CODE</span></a></div></div><div class="float-content padding"><h2 class="project-heading">Project Overview</h2><p class="project-description">The mail client I implemented utilizes TLS by doing the connection upgrade method. Such that we start with an insecure connection with our HELO message,
then tell the server to use TLS with STARTTLS and then login with our credentials. This email client uses the SSLv23 protocol to communicate with the mail server.</p></div><div class="center"><img class="clickable-image project-image-half" src="../images/received_mail.png"></div><div class="bannerInfo"><div class="float-content"><h2 class="project-heading banner-header">Goals</h2><p>1. Create a mail client able to send emails utilizing any provided mail server</p><p>2. Ensure TLS encryption on the messages and utilizing authentication with the server</p></div></div><div class="float-content padding project-process"><h2 class="project-heading">Process</h2><div class="project-step"><div class="project-subheading"><span>01</span><h3>SOCKET CONNECTION</h3></div><p>This project utilizes python's socket library so the program can set up a socket to both send and receive messages from a mail server.
The socket will initially start with an insecure connection using TCP for its transport layer protocol.</p></div><div class="project-step"><div class="project-subheading"><span>02</span><h3>SAYING HELO</h3></div><p>After we have a TCP connection with the mail server, we will now start by saying "HELO" which is a message to kick off our SMTP connection.
We expect at this point to receive a 250 response from the server with their own HELO message. This is to ensure both the client and server
are able hear each other correctly.</p><img class="clickable-image" src="../images/smtp_client_sending_helo.png"></div><div class="project-step"><div class="project-subheading"><span>03</span><h3>SECURING THE CONNECTION</h3></div><p>As mentioned before, our connection so far has only been insecure, so now we will wrap the socket utilizing python's SSL library.
We first will send a new message to the server indicating we wish to upgrade our connection to a secure connection using the STARTTLS command.
After receiving another 250 from the server we can wrap our socket and can also provide an SSL version as well as other information such as a certificate and key;
however, for the purposes of this project we will only provide the protocol SSLv23
Lastly, in order to comply to the TLS protocol the server must forget everything about the initial insecure connection, and we must send our "HELO" again.</p><img class="clickable-image project-image-shift" src="../images/smtp_client_sending_starttls.png"></div><div class="project-step"><div class="project-subheading"><span>04</span><h3>AUTH LOGIN</h3></div><p>Now the connection is secure, we can safely send some more sensitive data. But, before we do that, we want to make sure we encode our username and password using
a base64 format. I've seen some people use the base64 library for python, but you can just as well encode using base64 as well. We will send a command to indicate we
are ready to login with "AUTH LOGIN". The server should then reply with a 334, and base64 encoded message "VXNlcm5hbWU6". This message is just the encoding of "Username:",
which means we are ready to send our username to the server. The next 2 messages are just us sending our username and password in 2 separate messages encoded in base64.</p><img class="clickable-image" src="../images/smtp_client_sending_auth_login.png"></div><div class="project-step"><div class="project-subheading"><span>05</span><h3>TO AND FROM</h3></div><p>We've successfully setup a secure connection and authenticated ourselves with the mail server, now all that's left is to send our message. So who are we sending it to?
We have 2 messages we need to send which are "MAIL FROM" and "RCPT TO", which will allow the server to include a from email and send to the correct email address.
Now you might be wondering "why do I need to provide a 'From' if I am logged in?", well that's called spoofing if you decide to use a different email address than your own.
This doesn't mean the server will let you though, a lot of modern mail servers will prevent this behaviour (assuming they are doing their job right).</p><img class="clickable-image" src="../images/smtp_client_sending_to_from.png"></div><div class="project-step"><div class="project-subheading"><span>06</span><h3>SENDING THE MESSAGE</h3></div><p>Finally! Now we can send our message. We will start by telling the server we are sending data with the command "DATA". Then all the messages we send after this point will be appended
in the body our message to the recipient. We can finish our message by sending message ending with a period wrapped in "\r\n" (ex: "\r\n.\r\n"). We should receive a 250 indicating
the mail server has the message ready to send and is using SMTP to communicate with our recipient's mail server to send them the email. It is also good to end our connection by
sending the mail server the "QUIT" command.</p><img class="clickable-image project-image-shift" src="../images/smtp_client_sending_message.png"></div></div><div class="bannerInfo"><div class="float-content"><h2 class="project-heading">OUTCOME</h2><p>This took a bit of research to find the correct method of coding this project, but the overall experience allowed myself to gain a better understanding of how secure connections work
over the internet. Some additions on the project could be to include some more email specific fields like the subject line or carbon copy field; however, the main purpose of this project
focused heavily on TLS's ability to ensure a 3rd party could not intercept or manipulate packets sent between the client and server.</p></div></div></div><div class="mobile-menu"><ul class="navList"><li class="drop-down-container"><span>PROJECTS</span><i class="drop-down-caret fa fa-caret-down"></i><ul class="drop-down"><li><a href="https://jkeay.github.io/Portfolio/projects/jpg-encoder.html">JPG ENCODER</a></li><li><a href="https://jkeay.github.io/Portfolio/projects/chat-application.html">CHAT APPLICATION </a></li><li><a href="https://jkeay.github.io/Portfolio/projects/smtp-tls-client.html">SMTP TLS CLIENT </a></li><li><a href="https://jkeay.github.io/Portfolio/projects/dynamic-reliability-protocol.html">DYNAMIC RELIABILITY</a></li></ul></li><li><a href="https://jkeay.github.io/Portfolio/contact.html">CONTACT</a></li></ul></div><div class="image-modal"><div class="image-wrapper"><img><span class="close-modal">X</span></div></div><i class="back-to-top fa fa-arrow-circle-up"></i><footer></footer></body></html>